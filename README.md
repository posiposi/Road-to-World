# 自転車レンタルシェアサービス Road to World

自転車(主にロードバイクがターゲット)のレンタルシェアサービスです。
ユーザは自身の自転車を登録することで貸し出し、レンタル希望者は登録された自転車を希望の時間で借りることができます。
料金も貸出し側が自由に設定することができます。

## 設計

CacooにてワイヤーフレームやER図を公開しております。
下記リンクより確認いただけますと幸いです。

<https://cacoo.com/diagrams/GKfYc1Sy57rMTs8h/BA56D>

## 使用技術、開発環境

### フロントエンド

- Blade
- Bootstrap5
- Vue.js 3.2.36
- NPM 8.5.1
- Node.js 16.14.0

当初はjqueryも使用していましたが、キャッチアップも兼ねて一部機能実装のためにVue.jsを採用しました。
Bootstrapについてもプロジェクト初期は4系を使用していましたが、サポート終了のために5系へのアップデートを行いました。
そのため基本的な実装はLaravel標準のテンプレートBladeを使用し、一部をVue.jsで機能実装するという形になっています。

### バックエンド

- PHP 8.1.3
- Laravel 8.83.26
- MySQL 8.0.28

プロジェクトはLaravel6系でスタートしました。
サポート期限の都合上、随時アップデートを実行し現在は8系での開発、運用を行っています。

### インフラ

- Docker 2.13.0

MAMPで環境構築を行った後に、キャッチアップのためにLaravel Sailを利用してDockerへの移行を行いました。

### AWS構成図

![AWS構成図](https://user-images.githubusercontent.com/88781098/211971114-1ea716d2-be7c-4957-8665-36ef6bee8028.png)

AWS無料期間が終了し、コスト支払いの観点から最低限のインフラ構成となっています。余力があればマルチAZなどでの冗長化処理をしたいのですが、個人開発ということもあるので、当面はこのような構成での運用をしていきます。
上記の理由もあり現在はLambdaでの定時不要予約削除を行っていませんが、追って実装を検討しています。

## 実装した主な機能

1. Amazon S3を使用しての画像登録および表示
2. Laravel CashierによるStripe決済
3. 貸出し側、レンタル側のやり取りのための非同期通信でのコメント機能
4. 自転車の登録・登録情報変更
5. ユーザの登録・登録情報変更
6. レンタルしたい日時の30分単位での指定予約
7. 予約状況確認用の予約表
8. 未決済の予約を自動削除するコマンド、タスクスケジュールの設定(cron)
9. 自転車の検索機能
10. 画像のカルーセル表示

## アピールポイント

1. 多数ユーザーの予約バリデーション
多数のユーザーが利用した際に日時が重なってしまわないようにバリデーションを設定しております。
予約条件が複数あるので実装時に苦労しましたが、良い経験になりました。

2. 未決済予約、完了予約のバッチ処理
cronを使用して自動で未決済予約と完了した予約を削除するバッチ処理を実装しました。
Artisanコマンドを自分で作成する、定時実行の設定などで処理を行うようにしました。
AWSへデプロイする際はLambdaでの実装を予定しています。

3. AWS S3での画像アップロード、画像表示
S3への画像登録、S3からの画像表示を実装しました。
自転車はもちろん、個人のアバター写真の登録にも対応するようにしています。
AWSへのデプロイ後はRDSからS3へのアクセスを考えていますので、その学習についても予定しています。

4. Stripeでの支払い機能
ライブラリを使用して、Stripeでの支払いも本番環境において動作確認が出来ています。(Heroku環境下)
本格運用まではテストモードにしておきます。ご容赦ください。

5. コメント機能の非同期通信
機能作成当初はPHPでの同期通信のみでしたが、コメントについてはレスポンス性を考慮して非同期通信を導入してみました。
非同期通信の導入にあたってもjqueryからスタートしましたが、フロントエンドフレームワーク学習のためにVue3へアップデートしました。
Vue3のComposition APIを学習しながら実装をすることができて、大変有意義な学習もできたと思っております。

6. 検索機能
テスト的ではありますが簡易的な検索機能を実装しました。
最低限のバリデーション、部分検索の機能などを実装しています。

## 修正・改善ポイント

1. 検索機能の高度化
検索機能があくまでも簡単な設定になっているためより洗練されたものにしたいです。
特に料金が範囲指定できないため、あまり使いやすいとも思えません。
上記のポイントから修正していき、非同期通信での検索なども検討しています。

2. デザインの洗練
現在のデザインは最低限のものになっていて、利用者が使いにくいように思います。
私自身がデザインに対して苦手意識を持っていますが、少しずつでもデザインの基礎を学習したりライブラリを利用して洗練させていきたいです。

3. AWSでの運用
Herokuでの本番環境運用を行っていましたが、有料化に伴いせっかくならということでAWSでの運用を検討しています。
あくまでも暫定ではありますがEC2でのサーバー構築、RDSとS3でのDB・ストレージ運用を検討しています。

## 使い方

Road to Worldの基本的な使用方法を説明します。
(開発中画像のため、定期的に更新を予定しております。)

1. 初めて使用する方は上部ナビゲーションバーからユーザ登録を選択、ユーザ登録を行ってください。
![スクリーンショット 2021-11-06 16 45 29](https://user-images.githubusercontent.com/88781098/140688243-109b2bc9-81ad-462e-9b04-9ec8f37abe83.png)

2. ユーザ登録が完了したらユーザページをクリック、早速自転車を登録してみましょう。
![スクリーンショット 2021-11-06 16 46 13](https://user-images.githubusercontent.com/88781098/140688343-4b1ef96f-a1e9-46cd-8b72-9c8ea5939a7c.png)

3. 自転車を借りたい時は貸出中バイク一覧の中から、借りたい自転車をピックアップして時間指定して予約をクリック。
![スクリーンショット 2021-11-06 16 46 36](https://user-images.githubusercontent.com/88781098/140688408-893e2565-2cf4-405f-8060-6dd004baa554.png)

4. 予約ボタンをクリックすると仮予約となります。1時間以内に決済を行って予約を確定してください。
![スクリーンショット 2021-11-13 14 58 37](https://user-images.githubusercontent.com/88781098/141607796-2c215680-2fab-4f32-bf70-56df6d89604e.png)

5. 借りる前に気になる点があったら、コメントルーム一覧を選択して自分の名前をレンタル希望者欄からクリック。
![スクリーンショット 2021-11-13 14 57 02](https://user-images.githubusercontent.com/88781098/141607733-ac4adeca-af90-4d5c-8964-fa96a7f4b69c.png)

6. コメントを投稿して貸出者とやり取りをしましょう。
![スクリーンショット 2021-11-13 14 57 35](https://user-images.githubusercontent.com/88781098/141607745-aebf1cfc-03e5-467a-a9a8-5805c72c63ba.png)
