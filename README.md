# 自転車レンタルシェアサービス Road to World

__※本アプリケーションは初学時作成のものになります。クリーンアーキテクチャへは一部コードのみ対応しており、現在はあまりメンテナンスをしていません。__

自転車(主にロードバイクがターゲット)のレンタルシェアサービスです。
ユーザは自身の自転車を登録することで貸し出し、レンタル希望者は登録された自転車を希望の時間で借りることができます。
料金も貸出し側が自由に設定することができます。

## 使用技術、開発環境

### フロントエンド

- Blade
- Bootstrap5
- Vue.js 3.2.36
- NPM 8.5.1
- Node.js 16.14.0

当初はjqueryも使用していましたが、キャッチアップも兼ねて一部機能実装のためにVue.jsを採用しました。
Bootstrapについてもプロジェクト初期は4系を使用していましたが、サポート終了のために5系へのアップデートを行いました。
そのため基本的な実装はLaravel標準のテンプレートBladeを使用し、一部をVue.jsで機能実装するという形になっています。

### バックエンド

- PHP 8.1.3
- Laravel 8.83.26
- MySQL 8.0.28

プロジェクトはLaravel6系でスタートしました。
サポート期限の都合上、随時アップデートを実行し現在は8系での開発、運用を行っています。

### インフラ

- Docker 2.13.0

MAMPで環境構築を行った後に、キャッチアップのためにLaravel Sailを利用してDockerへの移行を行いました。

### AWS運用環境

![AWS構成図](https://user-images.githubusercontent.com/88781098/211971114-1ea716d2-be7c-4957-8665-36ef6bee8028.png)

AWS無料期間が終了し、コスト支払いの観点から最低限のインフラ構成となっています。余力があればマルチAZなどでの冗長化処理をしたいのですが、個人開発ということもあるので当面はこのような構成での運用をしていきます。
上記の理由もあり現在はLambdaでの定時不要予約削除を行っていませんが、追って実装を検討しています。

## 実装した主な機能

1. Amazon S3を使用しての画像登録および表示
2. Laravel CashierによるStripe決済
3. 貸出し側、レンタル側のやり取りのための非同期通信でのコメント機能
4. 自転車の登録・登録情報変更
5. ユーザの登録・登録情報変更
6. レンタルしたい日時の30分単位での指定予約
7. 予約状況確認用の予約表
8. 未決済の予約を自動削除するコマンド、タスクスケジュールの設定(cron)
9. 自転車の検索機能
10. 画像のカルーセル表示

## 主な画面

### メイン画面

![メイン画面](https://user-images.githubusercontent.com/88781098/212450466-e2b99207-c1b5-41be-8a92-c4063bdf55c0.png)

### フッター部

![フッター部](https://user-images.githubusercontent.com/88781098/212450783-334e0705-4354-4718-b40e-53094d60d627.png)

### マイページ

![マイページ](https://user-images.githubusercontent.com/88781098/212450636-090470d8-7318-4314-9b69-074b5640bc45.png)

### 貸出中自転車画面

画面上部
![画面上部](https://user-images.githubusercontent.com/88781098/212452323-10bb97b4-3520-4bb6-afbc-f6910a9ae485.png)
画面下部
![画面下部](https://user-images.githubusercontent.com/88781098/212452719-0efd9e20-1fe8-4728-b55f-2b9eb0758b36.png)

### 会員情報変更画面

画面上部
![画面上部](https://user-images.githubusercontent.com/88781098/212454002-82852a64-b738-44ba-ae0d-03bd647bd9a4.png)
画面下部
![画面下部](https://user-images.githubusercontent.com/88781098/212454384-7edc6bd9-561c-4119-a89d-3ba669e36ac2.png)

## アピールポイント

1. 多数ユーザーの予約バリデーション
多数のユーザーが利用した際に日時が重なってしまわないようにバリデーションを設定しております。
予約条件が複数あるので実装時に苦労しましたが、良い経験になりました。

2. 未決済予約、完了予約のバッチ処理
cronを使用して自動で未決済予約と完了した予約を削除するバッチ処理を実装しました。
Artisanコマンドを自分で作成する、定時実行の設定などで処理を行うようにしました。
AWSへデプロイする際はLambdaでの実装を予定しています。

3. AWS S3での画像アップロード、画像表示
S3への画像登録、S3からの画像表示を実装しました。
自転車はもちろん、個人のアバター写真の登録にも対応するようにしています。
AWSへのデプロイ後はRDSからS3へのアクセスを考えていますので、その学習についても予定しています。

4. Stripeでの支払い機能
ライブラリを使用して、Stripeでの支払いも本番環境において動作確認が出来ています。(Heroku環境下)
本格運用まではテストモードにしておきます。ご容赦ください。

5. コメント機能の非同期通信
機能作成当初はPHPでの同期通信のみでしたが、コメントについてはレスポンス性を考慮して非同期通信を導入してみました。
非同期通信の導入にあたってもjqueryからスタートしましたが、フロントエンドフレームワーク学習のためにVue3へアップデートしました。
Vue3のComposition APIを学習しながら実装をすることができて、大変有意義な学習もできたと思っております。

6. 検索機能
テスト的ではありますが簡易的な検索機能を実装しました。
最低限のバリデーション、部分検索の機能などを実装しています。

## 修正・改善ポイント

1. 検索機能の高度化
検索機能があくまでも簡単な設定になっているためより洗練されたものにしたいです。
特に料金が範囲指定できないため、あまり使いやすいとも思えません。
上記のポイントから修正していき、非同期通信での検索なども検討しています。

2. デザインの洗練
現在のデザインは最低限のものになっていて、利用者が使いにくいように思います。
私自身がデザインに対して苦手意識を持っていますが、少しずつでもデザインの基礎を学習したりライブラリを利用して洗練させていきたいです。

3. 一部中断機能の再開
画面レイアウトの刷新、Vue.js導入に伴い一部の機能(自転車編集画面へのリンク、自転車の削除ボタン等)が中断しています。
アプリケーションの根幹になる機能もあるため、可能な限り早いタイミングでの機能再開を目指しています。

## 設計

Cacooにてプロジェクト初期段階のものにはなりますが、ワイヤーフレームやER図を公開しております。
下記リンクより確認いただけますと幸いです。

<https://cacoo.com/diagrams/GKfYc1Sy57rMTs8h/BA56D>
